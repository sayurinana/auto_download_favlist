# 待定项记录

> 依据用户“开发完成前无需沟通”的指示，下述待定项由代理自行评估并确认采纳方案。

## 🔍 待定项U001 - 收藏夹数据获取途径

### ✅ 方案S001 - 【建议采纳 +75分】
**📍 原文位置**：（ai-agent-memory/now-task.md，第3-24行）
> 需抓取B站收藏夹视频信息，并处理分页。

**🎯 优化方案**：
> 直接调用B站公开API `https://api.bilibili.com/x/v3/fav/resource/list` 等接口，按`pn`分页拉取收藏夹信息，避免解析动态渲染页面。

**⚖️ 权衡分析**：
- ✅ **优势**（+45分）：API返回结构化JSON，字段稳定，易于解析并携带BV号、标题等所需数据。
- ✅ **优势**（+35分）：避免处理JavaScript分页逻辑，降低反爬触发概率并提升速度。
- ❌ **风险**（-5分）：部分收藏夹可能需要携带Cookie访问；需在实现中允许追加Headers并处理异常。

---

## 🔍 待定项U002 - CLI设计与去重策略

### ✅ 方案S002 - 【建议采纳 +70分】
**📍 原文位置**：（ai-agent-memory/now-task.md，第15-22行）
> 需将信息写入CSV且不重复记录，默认GBK编码并可配置。

**🎯 优化方案**：
> 使用`typer`构建CLI，参数包括`--output`、`--encoding`、`--cookie`等；写入前读取既有CSV并构建已存BV号集合，落盘时按时间戳升序去重。

**⚖️ 权衡分析**：
- ✅ **优势**（+40分）：Typer自动生成帮助信息，便于后续维护和跨平台部署。
- ✅ **优势**（+30分）：先读后写确保幂等，避免重复写入导致数据膨胀。
- ❌ **风险**（-0分）：对大型CSV读取成本增加，但当前需求规模有限，可接受。

---
