## 🔍 待定项U001 - 配置存储路径与格式

### ✅ 方案S001 - 【建议采纳 +70分】
**📍 原文位置**：（ai-agent-memory/now-task.md，第9-33行）
> “用户可选择录入新收藏夹信息或使用已存档数据中的收藏夹信息 … 把前面的URL、本地目录路径、csv文件名，保存为一条配置信息供以后运行时选用”

**🎯 优化方案**：
> 采用 JSON 文件存储配置，路径遵循 XDG 规范，默认写入 `~/.config/bilibili_favlist_helper/config.json`；若环境变量 `XDG_CONFIG_HOME` 存在则优先使用。

**⚖️ 权衡分析**：
- ✅ **优势**（+50分）：JSON 文本易于调试和备份，跨语言友好。
- ✅ **优势**（+20分）：遵循 CLI 规范推荐的 XDG 目录，避免污染项目根目录。
- ❌ **风险**（-5分）：Windows 用户可能不熟悉配置所在位置，需要在 CLI 输出中提示。

---

## 🔍 待定项U002 - CSV 输出目录定位

### ✅ 方案S001 - 【建议采纳 +60分】
**📍 原文位置**：（ai-agent-memory/now-task.md，第15-24行）
> “提示用户输入要把视频下载到本地的哪个目录… csv保存到用户数据目录中”

**🎯 优化方案**：
> 默认将生成的 `yyyy-MM-ddThh-mm-ss-favlist.csv` 文件保存在用户填写的下载目录下，并在配置中记录绝对路径；若目录不存在则创建。

**⚖️ 权衡分析**：
- ✅ **优势**（+40分）：CSV 与下载内容放在同一目录，便于一致管理。
- ✅ **优势**（+25分）：无需额外询问，减少交互步骤。
- ❌ **风险**（-5分）：目录位于可移动磁盘时可能导致写入失败，需要捕获异常给予提示。

---

## 🔍 待定项U003 - `bbdown` 调用策略

### ✅ 方案S001 - 【建议采纳 +55分】
**📍 原文位置**：（ai-agent-memory/now-task.md，第25-38行）
> “对每一个条目的BVid调用`bbdown <bvid>  --work-dir <本地目录路径>`来下载…可在程序配置中加入一个--dry-run开关”

**🎯 优化方案**：
> 通过 `subprocess.run` 调用 `bbdown`，默认执行真实命令；若 CLI 启动时加上 `--dry-run`，则仅打印拟执行的命令并跳过实际调用。

**⚖️ 权衡分析**：
- ✅ **优势**（+35分）：与要求一致，兼顾真实执行与演示模式。
- ✅ **优势**（+20分）：保留命令行输出，便于后续日志分析。
- ❌ **风险**（-5分）：命令缺失时需要友好错误处理，提示用户安装。

---
